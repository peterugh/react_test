<html>
	<head>
		<title>Hello React</title>
		<link rel="stylesheet" href="reset.css">
		<link rel="stylesheet" href="main.css">
		<script src="js/react-with-addons.js"></script>
		<script src="js/JSXTransformer.js"></script>
		<script src="js/MyMath.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.8/TweenMax.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.8/utils/Draggable.min.js"></script>
	</head>
	<body>
		<script type="text/jsx">
			/** @jsx React.DOM */
			(function()
			{
				var ReactTransitionGroup = React.addons.TransitionGroup;
				var STATE=
				{
					currentPage:0,
					pages:
					[
						{},
						{
							inputs:
								[
									{
										placeholder:"name",
										value:""
									},
									{
										placeholder:"dick length",
										value:""
									},
									{
										placeholder:"chicks banged",
										value:""
									}
								]
						},
						{
							position:
							{
								x:0,
								y:0
							}
						}
					]
				};

				var Holder=React.createClass({
					render:function()
					{
						var buttons=[];
						for(var i=0, iLen=STATE.pages.length; i<iLen; i++)
						{
							buttons.push(<button className={i==STATE.currentPage?"selected":""} onClick={this.onNavClick.bind(this, i)} ref={"nav"+i}>page {i+1}</button>)
						}
						return (
							<article className="holder">
								<nav>
									{buttons}
								</nav>
								<Content/>
							</article>
						)
					},
					getInitialState:function()
					{
						return STATE;
					},
					onNavClick:function(num)
					{
						STATE.currentPage=num;
						this.replaceState(STATE);
					}
				});

				var Content=React.createClass({
					render:function()
					{
						var bottom;
						switch(STATE.currentPage)
						{
							case 0:
								bottom=<Page0 key={Math.random()}/>
								break;
							case 1:
								bottom=<Page1 key={Math.random()}/>
								break;
							case 2:
								bottom=<Page2 key={Math.random()}/>
								break;
						}
						return (
							<section>
								<h1>Page {STATE.currentPage+1}</h1>
								<ReactTransitionGroup >
									{bottom}
								</ReactTransitionGroup>
							</section>
						)
					}
				});

				var Page0=React.createClass({
					render:function()
					{
						return (
								<p key="poop">Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy. Fuck her right in the pussy.</p>
						);
					},
					componentWillEnter:function(callback)
					{
						TweenLite.from(this.getDOMNode(), 0.3, {autoAlpha:0, onComplete:callback});
					},
					componentWillLeave:function(callback)
					{
						TweenLite.to(this.getDOMNode(), 0.3, {autoAlpha:0, onComplete:callback});
					}
				});

				var Page1=React.createClass({
					data:null,
					render:function()
					{
						this.data=STATE.pages[1].inputs;
						var inputs=[];
						for(var i=0, iLen=this.data.length; i<iLen; i++)
						{
							var item=this.data[i];
							inputs.push(
								<input type="text" placeholder={item.placeholder} defaultValue={item.value} onChange={this.onChange.bind(this, i)}/>
								);
						}
						return (
							<form>
								{inputs}
								<button type="submit" onClick={this.onClick}>submit</button>
							</form>
						);
					},
					onChange:function(num, evt)
					{
						this.data[num].value=evt.currentTarget.value;
					},
					onClick:function(evt)
					{
						evt.preventDefault();
						for(var i=0, iLen=this.data.length; i<iLen; i++)
						{
							this.data[i].value="";
						}
						holder.replaceState(STATE);
					},
					componentWillEnter:function(callback)
					{
						var children=this.getDOMNode().children;
						var timeline=new TimelineLite({onComplete:callback});
						for(var i=0, iLen=children.length; i<iLen; i++)
						{
							timeline.insert(TweenLite.from(children[i], 0.3, {autoAlpha:0, top:-20, ease:Cubic.easeOut}), 0.1*i);
						}
					},
					componentWillLeave:function(callback)
					{
						var children=this.getDOMNode().children;
						var timeline=new TimelineLite({onComplete:callback});
						for(var i=0, iLen=children.length; i<iLen; i++)
						{
							timeline.insert(TweenLite.to(children[i], 0.3, {autoAlpha:0, top:-20, ease:Cubic.easeIn}), 0.1*i);
						}
					}
				});

				var Page2=React.createClass({
					data:null,
					draggable:null,
					render:function()
					{
						this.data=STATE.pages[2].position;
						return (
							<div>
								<figure>drag me</figure>
							</div>
						);
					},
					componentDidMount:function()
					{
						var area=this.getDOMNode();
						var dragger=area.firstChild;
						var pos="translate3d("+this.data.x+"px,"+this.data.y+"px,0px)";
						dragger.style.webkitTransform=pos;
						dragger.style.transform=pos;
						this.draggable=new Draggable(dragger, {type:"x,y", edgeResistance:0.5, onDrag:this.onDrag, bounds:area, edgeResistance:1});
					},
					componentWillUnmount:function()
					{
						this.draggable.kill();
					},
					onDrag:function(evt)
					{
						this.data.x=this.draggable.x;
						this.data.y=this.draggable.y;
					},
					componentWillEnter:function(callback)
					{
						TweenLite.from(this.getDOMNode(), 0.3, {width:0, onComplete:callback, ease:Cubic.easeInOut});
					},
					componentWillLeave:function(callback)
					{
						TweenLite.to(this.getDOMNode(), 0.3, {height:0, onComplete:callback, ease:Cubic.easeInOut});
					}
				});

				var holder=React.renderComponent(
					<Holder/>, document.body);
			})();
		</script>
	</body>
</html>